document.addEventListener("DOMContentLoaded",() =>{const isChromium=window.chrome,winNav=window.navigator,vendorName=winNav.vendor,isOpera=winNav.userAgent.indexOf("OPR")>-1,isIEedge=winNav.userAgent.indexOf("Edge")>-1,isIEedgeChromium=winNav.userAgent.indexOf("Edg")>-1,isIOSChrome=winNav.userAgent.match("CriOS");const htmlBody=[document.documentElement,document.body];const chatStatus=document.getElementById("vcstatus");const chatMessage=document.querySelector("#vcstatus #vcstatus-message");const drmpcWrapper=document.querySelectorAll(".drmpc-wrapper");let statusVar;const qaAListItem=document.querySelector(".qa-a-list-item");const qaAListItems=document.querySelectorAll(".qa-a-list .vcWatching");const vcWhichElement=document.querySelector(".vc-whichone");const vcWhichElementAll=document.querySelectorAll(".vc-whichone");const qaAList=document.querySelector(".qa-a-list");const tagsInput=document.querySelector("#tags");const qaQList=document.querySelector(".qa-q-list");const audioPath="/qa../qa-plugin/q2a-ai-voice-commander/";const vcastart=new Audio(`${audioPath}audio/lovelyboot1-103697.mp3`);const vcashutdown=new Audio(`${audioPath}audio/harp-motif2-36586.mp3`);const vcamatch=new Audio(`${audioPath}audio/strange-notification-36458.mp3`);let vcSoundPlay=false;document.addEventListener("click",() =>{vcSoundPlay=true;});let vcLocalUsername="";if (localStorage.vcLocalName) vcLocalUsername=localStorage.vcLocalName;let isRecording=false;if (localStorage.LSQ2AVCstate==="Q2AVCactive"){annyang.start();isRecording=true;vcFirstCheck();}const startVoiceCommander=() =>{vcastart.play();chatStatus.classList.add("active");setTimeout(function (){annyang.start();isRecording=true;localStorage.LSQ2AVCstate="Q2AVCactive";if (vcLocalUsername){statusVar="Hello " + vcLocalUsername + "!";chatMessage.innerHTML=statusVar;}else{statusVar="AI Voice commander Activated. Say Hello!";chatMessage.innerHTML=statusVar;}msg.text=statusVar;speechSynthesis.speak(msg);},1200);};const runAI=() =>{drmpcWrapper.forEach((el) =>{if (el.classList.contains("active-pulse")){setTimeout(() =>{el.classList.remove("active-pulse");el.classList.add("vc-temp-animation");},2000);}else{el.classList.add("active-pulse");const animationEnd=() =>{el.classList.remove("active-pulse");el.classList.add("vc-temp-animation");el.removeEventListener("animationend",animationEnd);el.removeEventListener("webkitAnimationEnd",animationEnd);el.removeEventListener("oanimationend",animationEnd);el.removeEventListener("msAnimationEnd",animationEnd);};el.addEventListener("animationend",animationEnd);el.addEventListener("webkitAnimationEnd",animationEnd);el.addEventListener("oanimationend",animationEnd);el.addEventListener("msAnimationEnd",animationEnd);}});if (isRecording){abortVoiceCommander();}else{startVoiceCommander();}};const abortVoiceCommander=() =>{chatStatus.classList.add("active");statusVar="AI Voice commander is now offline.";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);vcShutdown();};const vcShutdown=() =>{annyang.abort();isRecording=false;localStorage.LSQ2AVCstate="Q2AVCdeactivated";setTimeout(() =>{vcashutdown.volume=0.6;if (vcSoundPlay===true){vcashutdown.play();}drmpcWrapper.forEach(wrapper => wrapper.classList.remove("active-pulse"));},2200);setTimeout(() =>{chatStatus.classList.remove("active");chatMessage.innerHTML="Initializing...";},4000);};function toggleCommander(){const isSupportedBrowser=( isIOSChrome||(isChromium !== null && isChromium !== undefined && vendorName==="Google Inc." && !isOpera && !isIEedge && !isIEedgeChromium) );if (isSupportedBrowser){runAI();}else{drmpcWrapper.forEach(wrapper => wrapper.remove());chatMessage.innerHTML="Uh Oh! Browser not supported.<br/>Use Google Chrome to fully experience the AI bot.";chatStatus.classList.add("active");setTimeout(() =>{chatStatus.classList.remove("active");},4000);}}document.querySelectorAll(".drmpc").forEach((el) =>{el.addEventListener("click",(event) =>{toggleCommander();});});if(chatStatus){chatStatus.addEventListener("click",(event) =>{chatStatus.classList.remove("active");});}if (isIOSChrome||isChromium !== null && isChromium !== undefined && vendorName==="Google Inc." && isOpera==false && isIEedge==false && isIEedgeChromium==false){const getCommandsList=() =>{const commandList=document.querySelector(".vc-command-list");if (!commandList){chatStatus.insertAdjacentHTML("afterend","\ <div class=\"vc-command-list vcBox\">\ <h3>Here's a list of commands<span class=\"vc-close-command-list\">&#x2715;</span></h3>\ <blockquote>Words in parentheses are optional — you can say them or skip them.<br> For example:<code>Go Home</code> or <code>Go to the homepage</code> all work the same.</blockquote>\ <h4>Navigation:</h4>\ <ul>\ <li>search for [word]</li>\ <li>Go (to) (the) home(page)</li>\ <li>Go (to) (the) questions (page)</li>\ <li>...</li>\ <li>Open (the) first question</li>\ <li>Open (the) second question</li>\ <li>...</li>\ <li>go back</li>\ </ul>\ <h4>Ask a Question:</h4>\ <ul>\ <li>ask (a) question</li>\ <li>set title</li>\ <li>set (the)(question) body</li>\ <li>set tags</li>\ </ul>\ <h4>Add answer / comment:</h4>\ <ul>\ <li>Answer question</li>\ <li>(Do) (Add) (an) answer</li>\ <li>(Do) (Add) (write) (a) comment</li>\ <li>stop (writing)</li>\ <li>cancel (it) (that)</li>\ <li>send (it) (answer) (comment)</li>\ </ul>\ </div>");}setTimeout(() =>{const newCommandList=document.querySelector(".vc-command-list");if (newCommandList){newCommandList.classList.add("active");}},2000);};const closeCommandsList=() =>{const dynamicCommandList=document.querySelector(".vc-command-list");if (dynamicCommandList){dynamicCommandList.classList.remove("active");setTimeout(() =>{dynamicCommandList.remove();},1000);}};document.addEventListener("click",(event) =>{if (event.target.matches(".vc-close-command-list")){closeCommandsList();}});const debounce=(func,wait,immediate) =>{let timeout;return (...args) =>{const context=this;const later=() =>{timeout=null;if (!immediate) func.apply(context,args);};const callNow=immediate && !timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if (callNow) func.apply(context,args);};};const updateWatchingItem=() =>{const items=document.querySelectorAll(".qa-a-list-item");let closestItem=null;let closestDistance=Infinity;const viewportCenter=window.innerHeight / 2;items.forEach(item =>{const rect=item.getBoundingClientRect();const itemCenter=rect.top + rect.height / 2;if (rect.height===0||rect.top>window.innerHeight||rect.bottom < 0) return;const distanceToCenter=Math.abs(itemCenter - viewportCenter);if (distanceToCenter < closestDistance){closestDistance=distanceToCenter;closestItem=item;}});if (closestItem){items.forEach(item =>{item.classList.toggle("vcWatching",item===closestItem);});}};const debouncedUpdateWatchingItem=debounce(updateWatchingItem,100);window.addEventListener("scroll",debouncedUpdateWatchingItem);window.addEventListener("resize",debouncedUpdateWatchingItem);document.addEventListener("DOMContentLoaded",updateWatchingItem);document.addEventListener("click",(event) =>{const clicked=event.target.closest(".vc-whichone");if (clicked){clicked.classList.add("fadeOut");setTimeout(() =>{clicked.remove();},1000);}});const setVoice=() =>{var voices=window.speechSynthesis.getVoices();if (voices.length===0){setTimeout(setVoice,100);}else{msg.voice=voices[9];speechSynthesis.speak(msg);}};if (annyang){var msg=new SpeechSynthesisUtterance();setVoice();msg.voiceURI="native";msg.volume=1;msg.rate=1.15;msg.pitch=1.3;msg.lang="en-GB";annyang.setLanguage("en-GB");const jsVCsearch=search =>{statusVar="Here are the results I've found for:" + search;chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/search?q=" + search;location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},2000);};const vcGreeting=() =>{if (vcLocalUsername){statusVar="Hello " + vcLocalUsername + "!";}else{statusVar="Hello! What's your name?";}chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};const vcAskAIName=() =>{statusVar="You can call me:AI Voice commander".replace("USERNAME",vcLocalUsername);chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};const vcUserNameIs=(setUsername) =>{setUsername=setUsername.substr(0,1).toUpperCase() + setUsername.substr(1);statusVar="Nice to meet you " + setUsername + "! " + "Here's a list of commands to get you started!";chatMessage.innerHTML="Nice to meet you " + setUsername + "!<br>" + "Here's a list of commands to get you started!";msg.text=statusVar;speechSynthesis.speak(msg);vcLocalUsername=setUsername;localStorage.setItem("vcLocalName",setUsername);getCommandsList();};const vcHowAreYou=() =>{statusVar="I'm fine. Thanks for asking";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};const vcCommandList=() =>{statusVar="Here's a list of commands";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);getCommandsList();};const vcCloseCommandsList=() =>{closeCommandsList();};const vcRefreshPage=() =>{statusVar=`Refreshing page!`;chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{location.reload();},1000);};const vcTurnOff=() =>{statusVar=`Turning off microphone... Goodbye!`;chatMessage.innerHTML=statusVar;msg.text=statusVar;chatStatus.classList.add("active");speechSynthesis.speak(msg);vcShutdown();const speakingStatus=document.querySelector(".speakingStatus");if (speakingStatus){speakingStatus.innerHTML=`Turning off microphone... Goodbye!`;}};const vcMathAdd=(tag,tag2) =>{const intTag=Number(tag.replace(/\D/g,""));const intTag2=Number(tag2.replace(/\D/g,""));const addResult=intTag + intTag2;statusVar=`${intTag}+ ${intTag2}= ${addResult}`;chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};const vcMathMinus=(tag,tag2) =>{const intTag=Number(tag.replace(/\D/g,""));const intTag2=Number(tag2.replace(/\D/g,""));const minusResult=intTag - intTag2;statusVar=`${intTag}- ${intTag2}= ${minusResult}`;chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};const vcMathTimes=(tag,tag2) =>{const intTag=Number(tag.replace(/\D/g,""));const intTag2=Number(tag2.replace(/\D/g,""));const timesResult=intTag * intTag2;statusVar=`${intTag}* ${intTag2}= ${timesResult}`;chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};const vcMathDivide=(tag,tag2) =>{const intTag=Number(tag.replace(/\D/g,""));const intTag2=Number(tag2.replace(/\D/g,""));const divideResult=intTag / intTag2;statusVar=`${intTag}÷ ${intTag2}= ${divideResult}`;chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};const vcSetTitle=() =>{const titleElement=document.getElementById("title");window.scrollTo({top:titleElement.offsetTop - 300,behavior:"smooth"});titleElement.focus();chatMessage.innerHTML="writingText";};const vcSetCategory=() =>{const contentElement=document.querySelector("[name=\"content\"]");window.scrollTo({top:contentElement.offsetTop - 300,behavior:"smooth"});contentElement.focus();chatMessage.innerHTML="writingText";};const vcSetBody=() =>{const contentElement=document.querySelector("[name=\"content\"]");window.scrollTo({top:contentElement.offsetTop - 300,behavior:"smooth"});contentElement.focus();chatMessage.innerHTML="writingText";};const vcSetTags=() =>{const tagsElement=document.getElementById("tags");window.scrollTo({top:tagsElement.offsetTop - 300,behavior:"smooth"});tagsElement.focus();chatMessage.innerHTML="writingText";};const vcWriteAnswer=() =>{qa_toggle_element("anew");const anewElement=document.getElementById("anew");window.scrollTo({top:anewElement.offsetTop - 200,behavior:"smooth"});const answerContentElement=document.querySelector("[name=\"a_content\"]");answerContentElement.focus();chatMessage.innerHTML="writingText";};const vcWriteComment=() =>{const countWatching=document.querySelectorAll(".vcWatching").length;if (countWatching===1){document.querySelector(".vcWatching .qa-form-light-button-comment").click();document.querySelector(".vcWatching .qa-c-form [name*=\"_content\"]").focus();chatMessage.innerHTML="writingText";}else if (countWatching===2||countWatching===3){setTimeout(() =>{const vcWhichoneElements=document.querySelectorAll(".vc-whichone");vcWhichoneElements.forEach(el => el.remove());qaAListItems.forEach((item,index) =>{if (index < countWatching){const commentText=(index===0) ? "Comment the first one":(index===1) ? "Comment the second one":(index===2) ? "Comment the third one":"";const newElement=document.createElement("div");newElement.classList.add("vc-whichone");newElement.textContent=commentText;item.appendChild(newElement);}});},2000);statusVar="In what answer do you wish to comment?";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);}};const vcCommentFirstOption=() =>{const vcWatching=document.querySelector(".vcWatching");if (qaAListItems.length>1){qaAListItems[1].classList.remove("vcWatching");}if (qaAListItems.length>2){qaAListItems[2].classList.remove("vcWatching");}vcWatching.querySelector(".qa-form-light-button-comment").click();vcWatching.querySelector(".qa-c-form [name*=\"_content\"]").focus();chatMessage.innerHTML="writingText";vcWhichElementAll.forEach(el =>{el.classList.add("fadeOut");setTimeout(() =>{el.remove();},1000);});};const vcCommentSecondOption=() =>{const vcWatching=document.querySelector(".vcWatching");if (qaAListItems.length>0){qaAListItems[0].classList.remove("vcWatching");}if (qaAListItems.length>2){qaAListItems[2].classList.remove("vcWatching");}vcWatching.querySelector(".qa-form-light-button-comment").click();vcWatching.querySelector(".qa-c-form [name*=\"_content\"]").focus();chatMessage.innerHTML="writingText";vcWhichElementAll.forEach(el =>{el.classList.add("fadeOut");setTimeout(() =>{el.remove();},1000);});};const vcCommentThirdOption=() =>{const vcWatching=document.querySelector(".vcWatching");if (qaAListItems.length>0){qaAListItems[0].classList.remove("vcWatching");}if (qaAListItems.length>1){qaAListItems[1].classList.remove("vcWatching");}vcWatching.querySelector(".qa-form-light-button-comment").click();vcWatching.querySelector(".qa-c-form [name*=\"_content\"]").focus();chatMessage.innerHTML="writingText";vcWhichElementAll.forEach(el =>{el.classList.add("fadeOut");setTimeout(() =>{el.remove();},1000);});};const vcScrollToAnswers=() =>{const qaAListItem=document.querySelectorAll(".qa-a-list-item");if (qaAListItem.length !== 0){const targetPosition=document.querySelector(".qa-part-a-list").getBoundingClientRect().top + window.pageYOffset - 75;window.scrollTo({top:targetPosition,behavior:"smooth"});}else{statusVar="I'm sorry,but there are no answers to this question yet.";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);const targetPosition=document.querySelector(".qa-part-a-list").getBoundingClientRect().top + window.pageYOffset - 300;window.scrollTo({top:targetPosition,behavior:"smooth"});}};const vcPreviousAnswer=() =>{const vcWatching=document.querySelector(".vcWatching");if (!vcWatching) return;const previousAnswer=vcWatching.previousElementSibling;if (previousAnswer){const targetPosition=previousAnswer.getBoundingClientRect().top + window.pageYOffset - 66;window.scrollTo({top:targetPosition,behavior:"smooth"});}};const vcNextAnswer=() =>{const vcWatching=document.querySelector(".vcWatching");if (!vcWatching) return;const nextAnswer=vcWatching.nextElementSibling;if (nextAnswer){const targetPosition=nextAnswer.getBoundingClientRect().top + window.pageYOffset - 66;window.scrollTo({top:targetPosition,behavior:"smooth"});}};const vcWriteText=writingText =>{const focusedInput=document.querySelector("input:focus") ? document.querySelector("input:focus").value:"";const focusedTextarea=document.querySelector("textarea:focus") ? document.querySelector("textarea:focus").value:"";if (tagsInput===document.activeElement){writingText=writingText.toLowerCase();writingText=writingText.replace(/ dash /g,"-");writingText=writingText.replace(/ /g,",");tagsInput.value=focusedInput + writingText + ",";}else if (document.querySelector("input:not(#tags):focus")){writingText=writingText.toLowerCase();document.querySelector("input:focus").value=focusedInput + " " + writingText;}else if (document.querySelector("textarea:focus")){document.querySelector("textarea:focus").value=focusedTextarea + " " + writingText;}};const vcDeleteText=deleteWord =>{const focusedTextarea=(document.querySelector("input:focus,textarea:focus") ? document.querySelector("input:focus,textarea:focus").value.toLowerCase():"");const focusedCaseSensitive=deleteWord;if (tagsInput===document.activeElement){tagsInput.value=focusedTextarea.split("," + focusedCaseSensitive)[0];}else if (document.querySelector("input:not(#tags):focus")){document.querySelector("input:focus").value=focusedTextarea.split(" " + focusedCaseSensitive)[0];}else if (document.querySelector("textarea:focus")){document.querySelector("textarea:focus").value=focusedTextarea.split(" " + focusedCaseSensitive)[0];}};const vcDeleteAllText=() =>{const focusedTextarea=document.querySelector("input:focus,textarea:focus");if (focusedTextarea){focusedTextarea.value="";}};const vcSubmitText=() =>{const focusedElement=document.querySelector("input:focus,textarea:focus");if (focusedElement){const form=focusedElement.closest("form");if (form){form.submit();}}};const vcCancelAction=() =>{qa_toggle_element();};const vcStopWriting=() =>{const focusedElement=document.querySelector("input:focus,textarea:focus");if (focusedElement){focusedElement.blur();}};const vcOpenUserProfile=() =>{statusVar="Navigating to My account";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/user";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const vcOpenEditProfile=() =>{statusVar="Navigating to Edit my Profile";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/account";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const vcOpenUserMessages=() =>{statusVar="Navigating to Private messages";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/messages";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const vcOpenUserFavorites=() =>{statusVar="Navigating to My favorites";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/favorites";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const vcOpenUserUpdates=() =>{statusVar="Navigating to All my updates";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/updates";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const jsOpenAsk=() =>{statusVar="Navigating to Ask a Question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/ask";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const jsOpenAdmin=() =>{statusVar="Navigating to Admin";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/admin";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const jsOpenActivity=() =>{statusVar="Navigating to All Activity";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/activity";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const jsOpenHome=() =>{statusVar="Navigating to Home";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/qa";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const jsOpenQuestions=() =>{statusVar="Navigating to Questions";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/questions";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const jsOpenHot=() =>{statusVar="Navigating to Hot!";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/hot";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const jsOpenUnanswered=() =>{statusVar="Navigating to Unanswered";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/unanswered";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const jsOpenTags=() =>{statusVar="Navigating to Tags";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/tags";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const jsOpenCategories=() =>{statusVar="Navigating to Categories";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/categories";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const jsOpenUsers=() =>{statusVar="Navigating to Users";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="..//qa/users";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const jsOpenBadges=() =>{statusVar="Navigating to Badges";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{const navigateToUrl="/qa//badges";location.href=navigateToUrl.replace(/(:\/\/)|(\/)+/g,"$1$2");},1000);};const jsPostOpenFirst=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(1) .qa-q-item-title a").href;},1000);};const jsPostOpenSecond=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(2) .qa-q-item-title a").href;},1000);};const jsPostOpenThird=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(3) .qa-q-item-title a").href;},1000);};const jsPostOpenFourth=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(4) .qa-q-item-title a").href;},1000);};const jsPostOpenFifth=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(5) .qa-q-item-title a").href;},1000);};const jsPostOpenSixth=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(6) .qa-q-item-title a").href;},1000);};const jsPostOpenSeventh=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(7) .qa-q-item-title a").href;},1000);};const jsPostOpenEight=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(8) .qa-q-item-title a").href;},1000);};const jsPostOpenNineth=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(9) .qa-q-item-title a").href;},1000);};const jsPostOpenTenth=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(10) .qa-q-item-title a").href;},1000);};const jsPostOpenEleventh=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(11) .qa-q-item-title a").href;},1000);};const jsPostOpenTwelfth=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(12) .qa-q-item-title a").href;},1000);};const jsPostOpenThirteenth=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(13) .qa-q-item-title a").href;},1000);};const jsPostOpenFourteenth=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(14) .qa-q-item-title a").href;},1000);};const jsPostOpenFifteenth=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:nth-child(15) .qa-q-item-title a").href;},1000);};const jsPostOpenLast=() =>{statusVar="Opening question";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=qaQList.querySelector(".qa-q-list-item:last-child .qa-q-item-title a").href;},1000);};const vcBackPrevPage=() =>{statusVar="Navigating to previous page";chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);setTimeout(() =>{window.location.href=document.referrer;},2000);};const vcScrollToTop=() =>{window.scrollTo({top:0,behavior:"smooth"});};const vcScrollToBottom=() =>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});};const vcScrollUpABit=() =>{window.scrollBy({top:-300,left:0,behavior:"smooth"});};const vcScrollDownABit=() =>{window.scrollBy({top:300,left:0,behavior:"smooth"});};const vcTime=() =>{const checkDate=new Date();const currentTime=checkDate.toLocaleTimeString();statusVar=currentTime;chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};const vcDay=() =>{const checkDate=new Date();const currentDay=checkDate.toLocaleDateString();statusVar=currentDay;chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};const vcSentient=() =>{statusVar=`I do not possess consciousness,but I can mimic human behavior.`;chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};const vcWhoAreYou=() =>{statusVar=`I'm your AI assistant for this website.`;chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};const vcNotTalkingToYou=() =>{statusVar=`Oh,I'm sorry USERNAME. I thought you were talking to me.`.replace("USERNAME",vcLocalUsername);chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};const vcTalkingToYou=() =>{statusVar=`I'm sorry USERNAME. I wasn't paying attention.`.replace("USERNAME",vcLocalUsername);chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};const vcThankYou=() =>{statusVar=`You're welcome USERNAME. I'm here to help`.replace("USERNAME",vcLocalUsername);chatMessage.innerHTML=statusVar;msg.text=statusVar;speechSynthesis.speak(msg);};annyang.addCommands({"search for *tag":jsVCsearch,"Hello (AI Voice commander)":vcGreeting,"What's your name":vcAskAIName,"My name is *tag":vcUserNameIs,"(I'm fine) (I'm good) (I'm great) How are you?":vcHowAreYou,"Help":vcCommandList,"(Show) (me) (the) Command(s) List":vcCommandList,"(Show) (me) (the) (a) List of Command(s)":vcCommandList,"close (command list)(that)":vcCloseCommandsList,"refresh (page)":vcRefreshPage,"Turn off (the) (microphone)":vcTurnOff,"Shut down":vcTurnOff,"(how much is) *tag plus *tag2":vcMathAdd,"(how much is) *tag minus *tag2":vcMathMinus,"(how much is) *tag times *tag2":vcMathTimes,"(how much is) *tag divided (by) *tag2":vcMathDivide,"set title":vcSetTitle,"set category":vcSetCategory,"set (the)(question) body":vcSetBody,"set tags":vcSetTags,"(Do) (Add) (an) answer":vcWriteAnswer,"Answer question":vcWriteAnswer,"write (an) answer":vcWriteAnswer,"(Do) (Add) (write) (a) comment":vcWriteComment,"Comment the first one":vcCommentFirstOption,"Comment the second one":vcCommentSecondOption,"Comment the third one":vcCommentThirdOption,"Go (to) (the) (down) (to) answers":vcScrollToAnswers,"Scroll (down) (to) answers":vcScrollToAnswers,"(Go to) (Scroll to) previous answer":vcPreviousAnswer,"(Go to) (Scroll to) next answer":vcNextAnswer,"delete (everything) (all) until *tag":vcDeleteText,"erase (everything) (all) until *tag":vcDeleteText,"delete everything":vcDeleteAllText,"erase everything":vcDeleteAllText,"submit (answer) (comment)":vcSubmitText,"send (it) (answer) (comment)":vcSubmitText,"cancel (it) (that)":vcCancelAction,"stop (writing)":vcStopWriting,"what time is it":vcTime,"what day is (it) (today)":vcDay,"are you real":vcSentient,"are you sentient":vcSentient,"are you conscious":vcSentient,"who are you":vcWhoAreYou,"(I am)(I'm) not talking to you":vcNotTalkingToYou,"(I am)(I'm) talking to you":vcTalkingToYou,"Thank you":vcThankYou,"Go (to) (the) (my) profile":vcOpenUserProfile,"(Go (to) (the)) edit (my) profile":vcOpenEditProfile,"Go (to) (the) (my) messages":vcOpenUserMessages,"Go (to) (the) (my) favorites":vcOpenUserFavorites,"Go (to) (the) (my) updates":vcOpenUserUpdates,"Open (my) profile":vcOpenUserProfile,"(Open) edit (my) profile":vcOpenEditProfile,"Open (my) messages":vcOpenUserMessages,"Open (my) favorites":vcOpenUserFavorites,"Open (my) updates":vcOpenUserUpdates,"(Go (to) (the)) ask (a) question":jsOpenAsk,"Go (to) (the) admin (page)":jsOpenAdmin,"Go (to) (the) activity (page)":jsOpenActivity,"Go (to) (the) home(page)":jsOpenHome,"Go (to) (the) questions (page)":jsOpenQuestions,"Go (to) (the) hot (page)":jsOpenHot,"Go (to) (the) unanswered (page)":jsOpenUnanswered,"Go (to) (the) tags (page)":jsOpenTags,"Go (to) (the) categories (page)":jsOpenCategories,"Go (to) (the) users (page)":jsOpenUsers,"Go (to) (the) badges (page)":jsOpenBadges,"(Open) ask (a) question":jsOpenAsk,"Open admin (page)":jsOpenAdmin,"Open activity (page)":jsOpenActivity,"Open home(page)":jsOpenHome,"Open questions (page)":jsOpenQuestions,"Open hot (page)":jsOpenHot,"Open unanswered (page)":jsOpenUnanswered,"Open tags (page)":jsOpenTags,"Open categories (page)":jsOpenCategories,"Open users (page)":jsOpenUsers,"Open badges (page)":jsOpenBadges,"(Go (to) (the)) previous page":vcBackPrevPage,"go back":vcBackPrevPage,"Go (to) (the) (to) (the) top":vcScrollToTop,"Scroll (to) (the) top":vcScrollToTop,"Go (to) (the) (to) (the) bottom":vcScrollToBottom,"Scroll (to) (the) bottom":vcScrollToBottom,"Go (to) (the) up (a bit)":vcScrollUpABit,"Scroll up (a bit)":vcScrollUpABit,"Go (to) (the) down (a bit)":vcScrollDownABit,"Scroll down (a bit)":vcScrollDownABit,"Open (the) first question":jsPostOpenFirst,"Open (the) second question":jsPostOpenSecond,"Open (the) third question":jsPostOpenThird,"Open (the) fourth question":jsPostOpenFourth,"Open (the) fifth question":jsPostOpenFifth,"Open (the) sixth question":jsPostOpenSixth,"Open (the) seventh question":jsPostOpenSeventh,"Open (the) eighth question":jsPostOpenEight,"Open (the) nineth question":jsPostOpenNineth,"Open (the) tenth question":jsPostOpenTenth,"Open (the) eleventh question":jsPostOpenEleventh,"Open (the) twelfth question":jsPostOpenTwelfth,"Open (the) thirteenth question":jsPostOpenThirteenth,"Open (the) fourteenth question":jsPostOpenFourteenth,"Open (the) fifteenth question":jsPostOpenFifteenth,"Open (the) last question":jsPostOpenLast,});document.querySelectorAll("input,textarea").forEach(input =>{input.addEventListener("focusin",() =>{chatMessage.innerHTML="writingText";setTimeout(() =>{if (chatMessage.textContent==="writingText"){annyang.addCommands({"*tag":vcWriteText,});}},250);});input.addEventListener("focusout",() =>{chatMessage.textContent="";});});annyang.addCallback("resultMatch",() =>{if (vcSoundPlay===true){vcamatch.play();}const statusEl=document.getElementById("vcstatus-message");if ( document.querySelectorAll(".vc-command-list").length && chatMessage.textContent !== "Here's a list of commands" && (!statusEl||!statusEl.textContent.includes("Nice to meet you")) ){closeCommandsList();}});}const drSpeaks=document.querySelectorAll(".drmpc-bar");msg.onstart=() =>{chatStatus.classList.add("active");drSpeaks.forEach((el) =>{el.classList.add("dri");});};msg.onend=() =>{let shouldRemove=null;clearTimeout(shouldRemove);shouldRemove=setTimeout(() =>{chatStatus.classList.remove("active");if (document.querySelectorAll(".vc-command-list").length){chatMessage.innerHTML="Initializing...";}},2000);drSpeaks.forEach((el) =>{el.classList.remove("dri");});};}});